---
title: "GDB 使い方備忘録"
date: 2023-04-17T15:05:50+09:00
description: "GDBの忘れそうなコマンドを書き留めておく"
tags: ["GDB"]
draft: false
---

最近、[低レイヤを知りたい人のためのCコンパイラ作成入門](https://www.sigbus.info/compilerbook)を写経しています。
模範コードが常にあるわけではないので当然バグらせまくっているわけですが、アセンブリを出力するこの手のプログラムはなかなかデバッグが難しいです。
そこで重い腰をあげてGDBに挑戦してみたので備忘録です。

```terminal
$ gdb {プログラム名}
```

で起動。ブレークポイントを設定後、実行します。

```gdb
break {ラベル名}
run
```

AT&T記法が見づらい場合はIntel構文に変更。

```gdb
set disassembly-flavor intel
```

逆アセンブルしたコードの表示と現在のレジスタ情報を出す。

```gdb
layout asm
layout regs
```

そして、現在の地点からステップ実行します。

| コマンド | 略記 | 効果                                               |
| :------- | :--- | :------------------------------------------------- |
| `next`   | `n`  | 次の行まで実行（関数呼び出しなら関数全体を実行）   |
| `nexti`  | `ni` | 次の機械語を実行（関数呼び出しなら関数全体を実行） |
| `step`   | `s`  | 次の行まで実行（関数呼び出しなら関数の中に入る）   |
| `stepi`  | `si` | 次の機械語を実行（関数呼び出しなら関数の中に入る） |

コマンド入力画面でそのままENTERを押すと直前のコマンドを再度実行してくれるため、ステップ実行時などに便利です。
