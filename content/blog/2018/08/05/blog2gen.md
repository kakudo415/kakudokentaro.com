---
title: "二代目のブログができました"
date: 2018-08-05T00:00:00+09:00
draft: false
---

<p class="warn">
  <strong>この記事は以前のブログから引っ越してきたものです！</strong><br>
  <a href="https://github.com/kakudo415/blog">以前のブログのGitHubリポジトリ</a>
</p>

今回は新しく作ったブログシステムの紹介です  
[dev.to](https://dev.to)を参考に高速化に全振りしてます
## インラインCSS
凝ったCSSを使わず、さらにHTMLに直接埋め込むことで１ファイルの転送をしています  
HTMLの構造化した文書という作法においてはよくないかもしれませんが、早くなるはず・・  
## JavaScriptの遅延読み込み

```
<script src="hogehoge" defer="defer">
```

上のようにすることでJavaScriptを遅延読み込みすることができます  
これによりページ読み込み時にJavaScriptを実行しないので、ファーストビュー表示が早くなります  
ページ読み込み時に呼ばれなかったJavaScriptはページレンダリングが終わってから読み込まれます  
## そもそも要らないものは読み込まない
PureJSを使い、ライブラリなどに依存しないことで、外部ライブラリの読み込み時間を無くせる  
「シンタックスハイライトくらいはあってもいいかな」とも思う（読み込むとしても**defer**するけど）  
## クリック先読み（InstantClick）
[dev.to](https://dev.to)でも採用されているクリックではなくマウスオンした時点でAjaxを使いGETする仕組み  
そしてクリック時にはすでに取得してあるデータを使ってHTMLを差し替えるだけなのでユーザーに遅延を感じさせにくい  
なお導入方法がわからなかったので自分で書くはめになった（かなり時間がかかった）  
なおブラウザ、マウスなどの進む戻るボタンには**未対応**なので早急に対応します（現状リロードで対処してます(´・ω・`)）  
## Markdownでの執筆
今回のブログはMarkdownで書けるようになっています  
以前はHTMLファイルをコマンドラインでデータベースに入れる形式だったので、かなりモチベーションに影響しましたが、今回はよく書ける・・はず  
GoでのMD HTML変換には、[blackfriday](https://github.com/russross/blackfriday)を使用しました  
## 最後に
結局は本番環境（ConoHa VPS + nginx）で動かしてみないとわからないので
環境に合わせて調整して瞬きを追い抜くサイトを目指したいと思います
