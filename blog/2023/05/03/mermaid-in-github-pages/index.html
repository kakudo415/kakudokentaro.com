<!doctype html><html lang=ja prefix="og: https://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-SemiBold.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://kakudokentaro.com/assets/css/null-2.4.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/common.css><link rel="shortcut icon" href=https://kakudokentaro.com/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=https://kakudokentaro.com/assets/css/document.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/single.css><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: false });
    await mermaid.run({
      querySelector: 'pre > code.language-mermaid', 
    });
  </script><title>MermaidをGithub Pagesでも使う - Kakudo Kentaro</title><meta name=description content="MermaidをGithub Pagesでも使う"><meta property="og:description" content="MermaidをGithub Pagesでも使う"><meta property="og:title" content="MermaidをGithub Pagesでも使う - Kakudo Kentaro"><meta property="og:type" content="website"><meta property="og:image" content="https://kakudokentaro.com/assets/icon.png"><meta property="og:url" content="https://kakudokentaro.com/blog/2023/05/03/mermaid-in-github-pages/"><meta property="og:site_name" content="Kakudo Kentaro"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@kakudo415"></head><body><header><div class=inner><h1><a href=https://kakudokentaro.com/>Kakudo Kentaro</a></h1><a href=https://kakudokentaro.com/blog/>Blog</a>
<a href=https://kakudokentaro.com/about/>About</a></div></header><main><div class=inner><h1>MermaidをGithub Pagesでも使う</h1><time datetime=2023-05-03>2023-05-03 20:15</time><ul class=tags><li><a href=https://kakudokentaro.com/blog/tags/github-pages/>GitHub Pages</a></li><li><a href=https://kakudokentaro.com/blog/tags/mermaid/>Mermaid</a></li></ul><p>GitHub PagesでもMermaidが使いたくなったので備忘録。単刀直入には<code>&lt;header></code>に以下を追加。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:navy>script</span> <span style=color:teal>type</span><span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#34;module&#34;</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>import</span> mermaid from <span style=color:#d14>&#39;https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs&#39;</span>;
</span></span><span style=display:flex><span>  mermaid.initialize({ startOnLoad<span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>false</span> });
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>await</span> mermaid.run({
</span></span><span style=display:flex><span>    querySelector<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;pre &gt; code.language-mermaid&#39;</span>, <span style=color:#998;font-style:italic>// GitHub Flavored Markdownに合わせる
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>  });
</span></span><span style=display:flex><span>&lt;/<span style=color:navy>script</span>&gt;
</span></span></code></pre></div><p>詳しくは、<a href=https://mermaid.js.org/config/usage.html#using-mermaid-run>Using mermaid.run</a> に書いてあるが簡単に理解を残しておくと･･･</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span>  mermaid.initialize({ startOnLoad<span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>false</span> });
</span></span></code></pre></div><p>初期化時に自動で<code>mermaid.run()</code>を走らせないようにしています。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#000;font-weight:700>await</span> mermaid.run({
</span></span><span style=display:flex><span>    querySelector<span style=color:#000;font-weight:700>:</span> <span style=color:#d14>&#39;pre &gt; code.language-mermaid&#39;</span>, <span style=color:#998;font-style:italic>// GitHub Flavored Markdownに合わせる
</span></span></span><span style=display:flex><span><span style=color:#998;font-style:italic></span>  });
</span></span></code></pre></div><p>手動で<code>mermaid.run()</code>させるときに、オプションとして変換すべきタグがデフォルトの<code>pre.mermaid</code>ではなく<code>pre > code.language-mermaid</code>なのを伝えています。
<code>querySelector</code>形式で伝えられるのは便利ですね！</p><section class=share><div>Share on</div><a href="https://twitter.com/intent/tweet?text=Mermaid%e3%82%92Github%20Pages%e3%81%a7%e3%82%82%e4%bd%bf%e3%81%86 - Kakudo%20Kentaro&url=https%3a%2f%2fkakudokentaro.com%2fblog%2f2023%2f05%2f03%2fmermaid-in-github-pages%2f" rel="nofollow noopener noreferrer" target=_blank>Twitter</a></section></div></main></body></html>