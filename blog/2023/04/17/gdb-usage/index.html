<!doctype html><html lang=ja prefix="og: https://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-SemiBold.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://kakudokentaro.com/assets/css/null-2.4.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/common.css><link rel="shortcut icon" href=https://kakudokentaro.com/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=https://kakudokentaro.com/assets/css/document.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/single.css><title>GDB 使い方備忘録 - Kakudo Kentaro</title><meta name=description content="GDBの忘れそうなコマンドを書き留めておく"><meta property="og:description" content="GDBの忘れそうなコマンドを書き留めておく"><meta property="og:title" content="GDB 使い方備忘録 - Kakudo Kentaro"><meta property="og:type" content="website"><meta property="og:image" content="https://kakudokentaro.com/assets/icon.png"><meta property="og:url" content="https://kakudokentaro.com/blog/2023/04/17/gdb-usage/"><meta property="og:site_name" content="Kakudo Kentaro"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@kakudo415"></head><body><header><div class=inner><h1><a href=https://kakudokentaro.com/>Kakudo Kentaro</a></h1><a href=https://kakudokentaro.com/blog/>Blog</a>
<a href=https://kakudokentaro.com/about/>About</a></div></header><main><div class=inner><h1>GDB 使い方備忘録</h1><time datetime=2023-04-17>2023-04-17 15:05</time><ul class=tags><li><a href=https://kakudokentaro.com/blog/tags/gdb/>GDB</a></li></ul><p>最近、<a href=https://www.sigbus.info/compilerbook>低レイヤを知りたい人のためのCコンパイラ作成入門</a>を写経しています。
模範コードが常にあるわけではないので当然バグらせまくっているわけですが、アセンブリを出力するこの手のプログラムはなかなかデバッグが難しいです。
そこで重い腰をあげてGDBに挑戦してみたので備忘録です。</p><pre tabindex=0><code class=language-terminal data-lang=terminal>$ gdb {プログラム名}
</code></pre><p>で起動。ブレークポイントを設定後、実行します。</p><pre tabindex=0><code class=language-gdb data-lang=gdb>break {ラベル名}
run
</code></pre><p>AT&amp;T記法が見づらい場合はIntel構文に変更。</p><pre tabindex=0><code class=language-gdb data-lang=gdb>set disassembly-flavor intel
</code></pre><p>逆アセンブルしたコードの表示と現在のレジスタ情報を出す。</p><pre tabindex=0><code class=language-gdb data-lang=gdb>layout asm
layout regs
</code></pre><p>そして、現在の地点からステップ実行します。</p><table><thead><tr><th style=text-align:left>コマンド</th><th style=text-align:left>略記</th><th style=text-align:left>効果</th></tr></thead><tbody><tr><td style=text-align:left><code>next</code></td><td style=text-align:left><code>n</code></td><td style=text-align:left>次の行まで実行（関数呼び出しなら関数全体を実行）</td></tr><tr><td style=text-align:left><code>nexti</code></td><td style=text-align:left><code>ni</code></td><td style=text-align:left>次の機械語を実行（関数呼び出しなら関数全体を実行）</td></tr><tr><td style=text-align:left><code>step</code></td><td style=text-align:left><code>s</code></td><td style=text-align:left>次の行まで実行（関数呼び出しなら関数の中に入る）</td></tr><tr><td style=text-align:left><code>stepi</code></td><td style=text-align:left><code>si</code></td><td style=text-align:left>次の機械語を実行（関数呼び出しなら関数の中に入る）</td></tr></tbody></table><p>コマンド入力画面でそのままENTERを押すと直前のコマンドを再度実行してくれるため、ステップ実行時などに便利です。</p><section class=share><div>Share on</div><a href="https://twitter.com/intent/tweet?text=GDB%20%e4%bd%bf%e3%81%84%e6%96%b9%e5%82%99%e5%bf%98%e9%8c%b2 - Kakudo%20Kentaro&url=https%3a%2f%2fkakudokentaro.com%2fblog%2f2023%2f04%2f17%2fgdb-usage%2f" rel="nofollow noopener noreferrer" target=_blank>Twitter</a></section></div></main></body></html>