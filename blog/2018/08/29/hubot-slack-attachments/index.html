<!doctype html><html prefix="og: https://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-SemiBold.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://kakudokentaro.com/assets/fonts/Inter-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://kakudokentaro.com/assets/css/null-2.4.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/common.css><link rel="shortcut icon" href=https://kakudokentaro.com/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=https://kakudokentaro.com/assets/css/document.css><link rel=stylesheet href=https://kakudokentaro.com/assets/css/single.css><title>【旧ブログ記事】HubotでSlackにattachments付きのリッチなメッセージを送る - Kakudo Kentaro</title><meta property="og:title" content="【旧ブログ記事】HubotでSlackにattachments付きのリッチなメッセージを送る - Kakudo Kentaro"><meta property="og:type" content="website"><meta property="og:image" content="https://kakudokentaro.com/assets/icon.png"><meta property="og:url" content="https://kakudokentaro.com/blog/2018/08/29/hubot-slack-attachments/"></head><body><header><div class=inner><h1><a href=https://kakudokentaro.com/>Kakudo Kentaro</a></h1><a href=https://kakudokentaro.com/blog/>Blog</a>
<a href=https://kakudokentaro.com/about/>About</a></div></header><main><div class=inner><h1>【旧ブログ記事】HubotでSlackにattachments付きのリッチなメッセージを送る</h1><time datetime=2018-08-29>2018-08-29 00:00</time><p class=warn><strong>この記事は以前のブログから引っ越してきたものです！</strong><br><a href=https://github.com/kakudo415/blog>以前のブログのGitHubリポジトリ</a></p><p>こんにちは、今回はJavaScriptでSlackにリッチなメッセージをHubotを使って送りたいと思います（今回は備忘録的な記事です）<br>調べてもCoffeeScriptの情報が多かったりしてわかりにくかったので、出来たことを書いていきます<br>また2018年8月時点での情報ですので（hubot-slack version 4.5.4）、未来からご覧の方はうまく動かない可能性があります</p><h2 id=データ構造>データ構造</h2><p>hubot-slackは所定の形のObjectを渡してやることで、通常の使用では使えないリッチな表現をすることができます（attachments）</p><pre><code>let msg = new Object;  
msg = {
  attachments: [ // 配列なので注意！複数同時に送れます
    {
      title: "太字になり最初の記載されます",
      text: "本文です",
      fields: [ // フィールドも配列です、複数化
        {
          title: "フィールドのタイトルです",
          value: "フィールドの内容",
          short: true // 十分横幅が小さいか？trueの場合２列に並べられます
        }
      ]
    }
  ]
}</code></pre><p>全て書いていませんがこのようにattachments配列の中に書いていくことでデザインが可能です<br>さらに知りたい方は<a href=https://api.slack.com/docs/message-attachments>Slack Attachments</a>をご覧ください</p><h2 id=slackに投稿する>Slackに投稿する</h2><pre><code>robot.send({room: '送り先のチャンネル名'}, msg);</code></pre><p>このようにObjectを使ってチャンネルを指定して投稿できます</p><p>短い記事でしたが、意外と簡単にSlackのリッチなメッセージを作成できることがお分りいただけたかと思います</p><section class=share><div>Share on</div><a href="https://twitter.com/intent/tweet?text=%e3%80%90%e6%97%a7%e3%83%96%e3%83%ad%e3%82%b0%e8%a8%98%e4%ba%8b%e3%80%91Hubot%e3%81%a7Slack%e3%81%abattachments%e4%bb%98%e3%81%8d%e3%81%ae%e3%83%aa%e3%83%83%e3%83%81%e3%81%aa%e3%83%a1%e3%83%83%e3%82%bb%e3%83%bc%e3%82%b8%e3%82%92%e9%80%81%e3%82%8b - Kakudo%20Kentaro&url=https%3a%2f%2fkakudokentaro.com%2fblog%2f2018%2f08%2f29%2fhubot-slack-attachments%2f" rel="nofollow noopener noreferrer" target=_blank>Twitter</a></section></div></main></body></html>